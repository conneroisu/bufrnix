# Python Example for Betterproto with Pydantic

This example demonstrates how to use Betterproto with Pydantic validation through bufrnix. This combines the clean, modern Python dataclasses generated by betterproto with Pydantic's powerful validation capabilities.

## Features

- **Modern Python Dataclasses**: Clean, Pythonic dataclasses with proper `__init__` methods
- **Pydantic Validation**: Data validation on creation and type coercion
- **Async Support**: Built-in async/await support for gRPC services
- **Enhanced Type Hints**: Better IDE support and type checking
- **Validation Capabilities**: Runtime validation of field values (with proper proto annotations)

## Configuration

The key difference from standard betterproto is the `pydantic = true` option:

```nix
languages.python = {
  enable = true;
  outputPath = "proto/gen/python";

  betterproto = {
    enable = true;
    pydantic = true;  # Enable Pydantic dataclasses
  };
};
```

## Usage

```bash
# Generate code with Pydantic validation
nix run

# Run the validation test
python test_pydantic.py

# Or enter the development shell
nix develop
python test_pydantic.py
```

## Benefits over Standard Betterproto

1. **Data Validation**: Automatic validation of field types and constraints
2. **Type Coercion**: Intelligent conversion between compatible types
3. **Better Error Messages**: More informative validation errors
4. **Ecosystem Integration**: Works with the broader Pydantic ecosystem
5. **Enhanced Serialization**: Additional serialization options beyond protobuf

## Validation Features

While basic type validation works out of the box, for comprehensive validation you may want to:

1. Add field constraints in your `.proto` files
2. Use proto validation annotations
3. Implement custom validators

The generated code provides a solid foundation for validated dataclasses that maintain protobuf compatibility.

## Dependencies

- `python3Packages.betterproto`: The betterproto protobuf compiler
- `python3Packages.pydantic`: Validation library
- `python3Packages.grpclib`: Async gRPC support (for services)
- `python3Packages.black`: Code formatting (required by betterproto)
- `python3Packages.isort`: Import sorting (required by betterproto)
